<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Urban Population Growth and Transit Access</title>
  
  <!-- Include Vega and Vega-Lite libraries -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <!-- Link the external CSS file -->
  <link rel="stylesheet" href="dashboard-styles.css">

  <!-- Internal CSS to manage the grid layout -->
  <style>
    .visualization-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .vis-box {
      flex: 1;
      padding: 10px;
      box-sizing: border-box;
    }

    .vis-box-half {
      flex: 0.48;
    }

    h2 {
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>Exploring Urban Growth and Transit Access Over Time</h1>

  <p>
    In this visualization, we explore how urban population density and access to rapid transit systems have evolved across different countries over the years. The visualizations below provide insights into how the number of people living near rapid transit systems has grown in tandem with increasing urbanization.
  </p>

  <!-- Top row: Map/Line Chart -->
  <div class="visualization-row">
    <!-- Container for the Map Visualization -->
    <div class="vis-box">
      <h2>World Population Density and Rapid Transit Access</h2>
      <div id="map-vis"></div>
    </div>
    <!-- Line Chart can be placed here -->
    <div class="vis-box">
      <h2>Population Growth Over Time</h2>
      <div id="linechart-vis"></div>
    </div>
  </div>

  <!-- Second row: LHS for Bubble Chart, RHS for Heatmap -->
  <div class="visualization-row">
    <!-- Bubble Chart -->
    <div class="vis-box vis-box-half">
      <h2>Population Near Rapid Transit by Year</h2>
      <div id="bubble-vis"></div>
    </div>
    <!-- Heatmap -->
    <div class="vis-box vis-box-half">
      <h2>Heatmap of Population Near Transit Over Time</h2>
      <div id="heatmap-vis"></div>
    </div>
  </div>

  <!-- Third row: Violin Plot -->
  <div class="visualization-row">
    <div class="vis-box">
      <h2>Violin Plot of People Near Rapid Transit by Country</h2>
      <p>Select the countries below to compare their distribution of people near rapid transit systems.</p>
      <div id="violin-vis"></div>
    </div>
  </div>

  <p>
    Together, these visualizations allow us to see the correlation between urbanization and access to public transit. Countries with higher urban population densities typically have better access to rapid transit systems. Use the interactive features to explore the data from 1975 to 2024.
  </p>

  <script type="text/javascript">
    // Load the Map visualization from your GitHub repository
    vegaEmbed('#map-vis', 'https://raw.githubusercontent.com/jarelgomes1/atlasitdp/main/visualization.vg.json')
      .then(function(result) {
        console.log("Map visualization loaded successfully!");
      }).catch(function(error) {
        console.error("Error loading the Map visualization:", error);
      });

    // Load the Line Chart visualization (replace with the correct JSON URL for line chart)
    vegaEmbed('#linechart-vis', 'https://raw.githubusercontent.com/jarelgomes1/atlasitdp/main/visualization.vl-linechart.json')
      .then(function(result) {
        console.log("Line chart visualization loaded successfully!");
      }).catch(function(error) {
        console.error("Error loading the line chart visualization:", error);
      });

    // Load the Heatmap visualization
    vegaEmbed('#heatmap-vis', 'https://raw.githubusercontent.com/jarelgomes1/atlasitdp/main/visualization.vl%20(2).json')
      .then(function(result) {
        console.log("Heatmap visualization loaded successfully!");
      }).catch(function(error) {
        console.error("Error loading the Heatmap visualization:", error);
      });

    // Load the Bubble chart visualization
    vegaEmbed('#bubble-vis', 'https://raw.githubusercontent.com/jarelgomes1/atlasitdp/main/visualization.vl%20(1).json')
      .then(function(result) {
        console.log("Bubble chart visualization loaded successfully!");
      }).catch(function(error) {
        console.error("Error loading the Bubble chart visualization:", error);
      });

    // Load the Violin Plot visualization
    vegaEmbed('#violin-vis', 'https://raw.githubusercontent.com/jarelgomes1/atlasitdp/main/visualization.vl%20(3).json')
      .then(function(result) {
        console.log("Violin Plot visualization loaded successfully!");
      }).catch(function(error) {
        console.error("Error loading the Violin Plot visualization:", error);
      });
  </script>
</body>
</html>
