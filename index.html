<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Urban Population Growth and Transit Access</title>
  
  <!-- Include Vega and Vega-Lite libraries -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <!-- Link Pure.css for base, grids, forms, and buttons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/base-min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/grids-responsive-min.css">
  <link rel="stylesheet" href="dashboard-styles.css">

  <style>
    body {
      background-color: #f7f3e9;
      color: #333;
      font-family: 'Roboto', sans-serif;
    }
    .main-title {
      font-family: 'Georgia', serif; /* Serif font for storytelling */
      font-size: 2.5rem;
      font-weight: bold;
      text-align: center;
      margin: 30px 0;
      color: #2c3e50; /* Dark blue text */
    }
    .card-body {
      background-color: #fff;
      padding: 20px;
    }
    .visualization-container {
      height: 500px;
      width: 100%;
    }
    .side-by-side {
      display: flex;
      justify-content: space-between;
    }
    .card {
      width: 100%; /* Make sure the merged visualizations fit the whole width */
    }
    /* Dark Mode Styling */
    .dark-mode {
      background-color: #333;
      color: white;
    }
    .dark-mode .card-body {
      background-color: #444;
    }
    .dark-mode .pure-menu {
      background-color: #444;
      color: white;
    }
  </style>
</head>
<body>

  <!-- Main Title -->
  <h1 class="main-title">Urbanization Future with Transit Access</h1>

  <!-- Menu Bar -->
  <div class="pure-menu pure-menu-horizontal">
    <a href="#" class="pure-menu-heading">Urban Growth Insights</a>
  </div>

  <div class="container mt-4">
    <!-- Introduction Section -->
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">Exploring Urban Growth and Transit Access Over Time</div>
          <div class="card-subtitle">
            A journey through how urbanization has influenced population density and proximity to transit networks across the globe.
          </div>
          <div class="card-body">
            <p class="text-center">
              As urbanization increases, more people are living near rapid transit systems. These visualizations help to explore this growth and its impact on access to transportation.
            </p>
            <p class="text-center">
              The **interactive world map** allows you to click on a country to see detailed information about the population living near rapid transit and its population density. If data is unavailable for the selected country, a message will prompt you indicating that no data is available for that specific country.
            </p>
            <p class="text-center">
              The **line chart** visualizes the annual growth of populations living near transit networks, allowing you to hover over the bubbles to see detailed population numbers. This chart dynamically updates based on the country selected on the map.
            </p>
            <p class="text-center">
              The **bubble chart** tracks the annual growth of populations living near transit networks, offering insights into how urban areas are expanding over time. Hover over the bubbles to see detailed population numbers.
            </p>
            <p class="text-center">
              The **heatmap** visualizes changes in population density near transit systems over time, with darker colors indicating higher densities, allowing you to observe trends and shifts in urban growth.
            </p>
            <p class="text-center">
              The **parallel coordinates plot** allows you to compare key urban and transit infrastructure indicators, including block density and population density. Each country is represented by a line connecting the values for each indicator, providing a comprehensive view of urban development.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Combined Viz1 (Primary: World Map) and Viz2 (Secondary: Line Chart) Section -->
    <div class="row mt-4">
      <div class="col-12">
        <div class="card">
          <div class="card-header">Global Population Density and Transit Access Over Time</div>
          <div class="card-subtitle">
            This section visualizes the global population density and transit access across regions using an interactive world map. You can click on a country to explore its data. Alongside, a line chart shows the population living near transit systems over the years for the top 10 countries.
          </div>
          <div class="card-body">
            <div class="side-by-side">
              <!-- Viz2 (Line Chart) on the left -->
              <div class="card-body">
                <div id="linechart-vis" class="visualization-container"></div>
              </div>

              <!-- Viz1 (World Map) on the right -->
              <div class="card-body">
                <div id="map-vis" class="visualization-container"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Second row: Bubble Chart (left) and Heatmap (right) side by side -->
    <div class="row mt-4">
      <div class="side-by-side">
        <!-- Bubble Chart on the left -->
        <div class="card">
          <div class="card-header">Population Near Rapid Transit by Year</div>
          <div class="card-subtitle">
            Track the annual growth of populations living near transit networks. Hover over the bubbles to see detailed population numbers.
          </div>
          <div class="card-body">
            <div id="bubble-vis" class="visualization-container"></div>
          </div>
        </div>

        <!-- Heatmap on the right -->
        <div class="card">
          <div class="card-header">Heatmap of Population Near Transit Over Time</div>
          <div class="card-subtitle">
            This heatmap visualizes changes in population density near transit systems over time. Darker colors indicate higher densities.
          </div>
          <div class="card-body">
            <div id="heatmap-vis" class="visualization-container"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Third row: Violin Plot (left) and Parallel Coordinates Plot (right) side by side -->
    <div class="row mt-4">
      <div class="side-by-side">
        <!-- Violin Plot on the left -->
        <div class="card">
          <div class="card-header">Violin Plot of People Near Rapid Transit by Country</div>
          <div class="card-subtitle">
            Compare how different countries rank in terms of transit access for their populations. Hover over each section to get specific insights on population distribution.
          </div>
          <div class="card-body">
            <div id="violin-vis" class="visualization-container"></div>
          </div>
        </div>

        <!-- Parallel Coordinates Plot on the right -->
        <div class="card">
          <div class="card-header">Urban and Transit Infrastructure Indicators by Country</div>
          <div class="card-subtitle">
            Compare key infrastructure indicators, including block density, population density, and access to various transit types. Each country is represented by a line connecting the values for each indicator.
          </div>
          <div class="card-body">
            <div id="parallel-coords-vis" class="visualization-container" style="height: 650px;"></div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Footer Section -->
  <footer style="background-color: #27ae60; padding: 20px; text-align: center; color: white;">
    <p>Jarel Eloysius Gomes Â© 2024</p>
    <p>Data source: <a href="https://atlas.itdp.org" style="color: white;" target="_blank">atlas.itdp.org</a></p>
    <p>Contact us at <a href="mailto:jjar0004@student.monash.edu" style="color: white;">jjar0004@student.monash.edu</a></p>
    <p><a href="https://github.com/jarelgomes1/atlasitdp" target="_blank" style="color: white;">GitHub Repository</a></p>
  </footer>

  <!-- Dark Mode Toggle -->
  <button class="pure-button" id="dark-mode-toggle" style="margin: 10px;">Toggle Dark Mode</button>

  <script type="text/javascript">
    // Load viz1 (World Map visualization) with Vega
    vegaEmbed('#map-vis', 'https://raw.githubusercontent.com/jarelgomes1/atlasitdp/main/visualization.vg.json', {"actions": false})
      .then(function(result) {
        console.log("Map visualization loaded successfully!");
      }).catch(function(error) {
        console.error("Error loading the Map visualization:", error);
      });

    // Load viz2 (Line Chart) with Vega-Lite
    vegaEmbed('#linechart-vis', 'https://raw.githubusercontent.com/jarelgomes1/atlasitdp/refs/heads/main/visualization.vl%20(5).json', {"actions": false})
      .then(function(result) {
        console.log("Line chart visualization loaded successfully!");
      }).catch(function(error) {
        console.error("Error loading the Line chart visualization:", error);
      });

    // Load Bubble Chart visualization
    vegaEmbed('#bubble-vis', 'https://raw.githubusercontent.com/jarelgomes1/atlasitdp/main/visualization.vl%20(1).json', {"actions": false})
      .then(function(result) {
        console.log("Bubble chart visualization loaded successfully!");
      }).catch(function(error) {
        console.error("Error loading the Bubble chart visualization:", error);
      });

    // Load Heatmap visualization
    vegaEmbed('#heatmap-vis', 'https://raw.githubusercontent.com/jarelgomes1/atlasitdp/main/visualization.vl%20(2).json', {"actions": false})
      .then(function(result) {
        console.log("Heatmap visualization loaded successfully!");
      }).catch(function(error) {
        console.error("Error loading the Heatmap visualization:", error);
      });

    // Load Violin Plot visualization
    vegaEmbed('#violin-vis', 'https://raw.githubusercontent.com/jarelgomes1/atlasitdp/main/visualization.vl%20(3).json', {"actions": false})
      .then(function(result) {
        console.log("Violin Plot visualization loaded successfully!");
      }).catch(function(error) {
        console.error("Error loading the Violin Plot visualization:", error);
      });

    // Load Parallel Coordinates Plot visualization
    vegaEmbed('#parallel-coords-vis', 'https://raw.githubusercontent.com/jarelgomes1/atlasitdp/main/visualization.vl%20(4).json', {"actions": false})
      .then(function(result) {
        console.log("Parallel Coordinates Plot loaded successfully!");
      }).catch(function(error) {
        console.error("Error loading the Parallel Coordinates Plot:", error);
      });

    // Dark Mode Toggle
    const toggleButton = document.getElementById('dark-mode-toggle');
    toggleButton.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
    });
  </script>

</body>
</html>
